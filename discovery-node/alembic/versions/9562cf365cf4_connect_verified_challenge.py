"""connect_verified_challenge

Revision ID: 9562cf365cf4
Revises: f64a484f1496
Create Date: 2021-07-29 15:10:51.037940

"""
from alembic import op


# revision identifiers, used by Alembic.
revision = "9562cf365cf4"
down_revision = "f64a484f1496"
branch_labels = None
depends_on = None


def upgrade():
    # ### commands auto generated by Alembic - please adjust! ###
    connection = op.get_bind()
    connection.execute(
        """
        -- challenge_profile_completion rows.
        insert into user_challenges (challenge_id, user_id, specifier, is_complete)
        select 
            'connect-verified' as challenge_id,
            u.user_id as user_id,
            u.user_id as specifier,
            True as is_complete
        from users u
        where u.is_verified is True AND u.is_current is True;
    """
    )


def downgrade():
    pass
